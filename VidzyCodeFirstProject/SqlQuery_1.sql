DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'VidzyCodeFirstProject.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '202309241228358_initialModel'
BEGIN
    CREATE TABLE [dbo].[Genres] (
        [Id] [tinyint] NOT NULL,
        [Name] [nvarchar](max),
        CONSTRAINT [PK_dbo.Genres] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Videos] (
        [id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        [Releasedate] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.Videos] PRIMARY KEY ([id])
    )
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202309241228358_initialModel', N'VidzyCodeFirstProject.Migrations.Configuration',  0x1F8B0800000000000400CD58DB6EE336107D2FD07F10F8D4025933979736907791759222E83A09226FDE6969ECB0252995A4026B7FAD0FFDA4FE4287BA5B17C7B9205B04087499399C99333C1CF9DFBFFFF13F6DA4F01E411B1EAB29399A1C120F5418475CADA724B5AB0FBF904F1F7FFCC1BF88E4C6BBAFEC4E9C1D7A2A33250FD626A7949AF001243313C9431D9B786527612C298B627A7C78F82B3D3AA2801004B13CCFBF4B95E512F21BBC9DC52A84C4A64CCCE30884299FE39B2047F5AE990493B010A6E49E47DFB2199A5D726DECAD8EFF80D012EF4C7086C1042056C4634AC596590CF5F4AB81C0EA58AD83041F30B1C81240BB151306CA144E1BF37DB3393C76D9D0C6B1820A536363F94CC0A393B23CB4EBFEA22293BA7C58C00B2CB4CD5CD67911A7E437501A33EFAE743A13DA598D147892BB1D78832F0FEAC6C0FE717F07DE2C1536D53055905ACDC481779B2E050F7F876C11FF096AAA5221DA7162A4F86EEB013E42FC04B4CDEE6055467F15118F6EFBD1AE63EDD6F22952FB9C594CFD1AD7664B017517D09DEEEE7F0580AD841B837873B6F9026A6D1FA6042F8977C93710554F4AD4AF8AE33E4227ABD3CE223E6D68D94916961BE2E79395BB7D7FB2F80BC8E2355957CA9E1C0FB0D52A4360630DD899A09985E896590B5A39C2212FE47760B6BFC81D0860062266EBB5CEF17AC1E553ADB8BB4B50332DE3987AD32ADFB25C3E07FA0555B06C195346BD1D730119806D8B84215E134021AD93523DE86EF7BCFF86DCCB7E1ECAB2CEA7117F5AA87F754AD09163C29FB32441F25AC746F9C40B8A3363F62178BE92CA028386664050EB68EB95B015D91A3A6F71E96AFB21E96CC91CC7B348F6CC5AEC8D94B65A688BA0EE1E6C0A5E99BBEB56830CEB7A17A7A9E02526257137E5F9411D4C758CF4FCF2239B09A6073478168B54AA311DDFE55D6CD4B67FF1A48FE0D34EE0DD0AD15E893A02D52DF85E74940DFF7A3A8A0DF27C3A46FCC60ACA3B74F495FA6DE81843D812C536D0D68B77A6B7A7445D937AF55A913ACAE3972AF0F414DB9385C2847858A847E4122521C88C0539710693E02F31131CF36D0CE64CF115185B1CD104A7C8E3CE14FCFF9948A93191D8672C7DF789D072957157D6570C85EA91E9F081E99F24DBFCDC467AF5E0F7EE33575E8A27A7AAF7A9D55EA394BBB66F3D4AF5CFEC3DA6A5F161A9D8DA18EB12479F4511633560ED33488DCF5143C8D5ECF5C219ABAF603E6D7FADFBE760F8BA8170DFEE0A4F2E948606B4B2B952ABB8E210936A47549974289E8365C8293BD396AF58E8CEC5108CC947F37B265234B9904B88AED44D6A93D49E19037229B6467D9FEE5E3F1F24B763F66F127767DE22050C93BBB6BC519F532EA23AEECB81B61C81700D586E408C0A3F4D106E9DD548D7B1DA13A82CDF3924A0DCF65D804C0482991B15B04778496CF829F105D62CCCAA83681CE46922B6CBEE9F73B6D64C9A12A3F177BF4051F713D4C7FF00C1C5FD5CB4120000 , N'6.4.4')
END

IF @CurrentMigration < '202309241232485_addingReferenceDataToGenreTable'
BEGIN
    Insert into dbo.Genres (id, Name) values(1, 'Action')
    Insert into dbo.Genres (id, Name) values (2, 'Comedy')
    Insert into dbo.Genres (id, Name) values (3, 'Sci-Fi')
    Insert into dbo.Genres (id, Name) values (4, 'Horror')
    Insert into dbo.Genres (id, Name) values (5, 'Animation')
    Insert into dbo.Genres (id, Name) values (6, 'Fantasy')
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202309241232485_addingReferenceDataToGenreTable', N'VidzyCodeFirstProject.Migrations.Configuration',  0x1F8B0800000000000400CD58DB6EE336107D2FD07F10F8D4025933979736907791759222E83A09226FDE6969ECB0252995A4026B7FAD0FFDA4FE4287BA5B17C7B9205B04087499399C99333C1CF9DFBFFFF13F6DA4F01E411B1EAB29399A1C120F5418475CADA724B5AB0FBF904F1F7FFCC1BF88E4C6BBAFEC4E9C1D7A2A33250FD626A7949AF001243313C9431D9B786527612C298B627A7C78F82B3D3AA2801004B13CCFBF4B95E512F21BBC9DC52A84C4A64CCCE30884299FE39B2047F5AE990493B010A6E49E47DFB2199A5D726DECAD8EFF80D012EF4C7086C1042056C4634AC596590CF5F4AB81C0EA58AD83041F30B1C81240BB151306CA144E1BF37DB3393C76D9D0C6B1820A536363F94CC0A393B23CB4EBFEA22293BA7C58C00B2CB4CD5CD67911A7E437501A33EFAE743A13DA598D147892BB1D78832F0FEAC6C0FE717F07DE2C1536D53055905ACDC481779B2E050F7F876C11FF096AAA5221DA7162A4F86EEB013E42FC04B4CDEE6055467F15118F6EFBD1AE63EDD6F22952FB9C594CFD1AD7664B017517D09DEEEE7F0580AD841B837873B6F9026A6D1FA6042F8977C93710554F4AD4AF8AE33E4227ABD3CE223E6D68D94916961BE2E79395BB7D7FB2F80BC8E2355957CA9E1C0FB0D52A4360630DD899A09985E896590B5A39C2212FE47760B6BFC81D0860062266EBB5CEF17AC1E553ADB8BB4B50332DE3987AD32ADFB25C3E07FA0555B06C195346BD1D730119806D8B84215E134021AD93523DE86EF7BCFF86DCCB7E1ECAB2CEA7117F5AA87F754AD09163C29FB32441F25AC746F9C40B8A3363F62178BE92CA028386664050EB68EB95B015D91A3A6F71E96AFB21E96CC91CC7B348F6CC5AEC8D94B65A688BA0EE1E6C0A5E99BBEB56830CEB7A17A7A9E02526257137E5F9411D4C758CF4FCF2239B09A6073478168B54AA311DDFE55D6CD4B67FF1A48FE0D34EE0DD0AD15E893A02D52DF85E74940DFF7A3A8A0DF27C3A46FCC60ACA3B74F495FA6DE81843D812C536D0D68B77A6B7A7445D937AF55A913ACAE3972AF0F414DB9385C2847858A847E4122521C88C0539710693E02F31131CF36D0CE64CF115185B1CD104A7C8E3CE14FCFF9948A93191D8672C7DF789D072957157D6570C85EA91E9F081E99F24DBFCDC467AF5E0F7EE33575E8A27A7AAF7A9D55EA394BBB66F3D4AF5CFEC3DA6A5F161A9D8DA18EB12479F4511633560ED33488DCF5143C8D5ECF5C219ABAF603E6D7FADFBE760F8BA8170DFEE0A4F2E948606B4B2B952ABB8E210936A47549974289E8365C8293BD396AF58E8CEC5108CC947F37B265234B9904B88AED44D6A93D49E19037229B6467D9FEE5E3F1F24B763F66F127767DE22050C93BBB6BC519F532EA23AEECB81B61C81700D586E408C0A3F4D106E9DD548D7B1DA13A82CDF3924A0DCF65D804C0482991B15B04778496CF829F105D62CCCAA83681CE46922B6CBEE9F73B6D64C9A12A3F177BF4051F713D4C7FF00C1C5FD5CB4120000 , N'6.4.4')
END

IF @CurrentMigration < '202309241255261_modifyRelationshipBetweenVideoTableAndGenreTable'
BEGIN
    ALTER TABLE [dbo].[Videos] ADD [GenreId] [int] NOT NULL DEFAULT 0
    ALTER TABLE [dbo].[Videos] ADD [Genre_Id] [tinyint]
    CREATE INDEX [IX_Genre_Id] ON [dbo].[Videos]([Genre_Id])
    ALTER TABLE [dbo].[Videos] ADD CONSTRAINT [FK_dbo.Videos_dbo.Genres_Genre_Id] FOREIGN KEY ([Genre_Id]) REFERENCES [dbo].[Genres] ([Id])
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202309241255261_modifyRelationshipBetweenVideoTableAndGenreTable', N'VidzyCodeFirstProject.Migrations.Configuration',  0x1F8B0800000000000400CD59CB6EE33614DD17E83F085AB545C672924D6BD833C838496174F2409404DD05B474EDB0A52895A40C7B8A7E5917FDA4FE422FF51625D9B293C914030C1C92F7F03E0EEFC3FEF7EF7FC61FD601B35620240DF9C43E1E0C6D0BB817FA942F2776AC16EF7EB43FBCFFF69BF1851FACADC7FCDCA93E87925C4EEC67A5A291E348EF1902220701F54428C3851A7861E0103F744E86C39F9CE3630710C2462CCB1ADFC55CD100923FF0CF69C83D88544CD855E80393D93AEEB809AA754D029011F160623F52FFF3668AC72EA990EA5684BF81A76CEB8C5182CAB8C016B645380F1551A8EAE84182AB44C8976E840B84DD6F22C0730BC22464268CCAE37DAD199E686B9C523087F262A9C2604FC0E3D3CC3D8E297E9093EDC27DE8C00B74B4DA68AB13274EEC9F810BB4DCBC693465429FEA70F020113BB25A378F0A62207FF4BF236B1A33150B9870889520ECC8BA8DE78C7ABFC0E63EFC1DF884C78C55F5444D71AFB6804B881F81509B3B5864DACF7CDB72EA728E295888556452D33E6E149A7E8D779339838205CE5671FD7F0E8054C287615B5764FD09F8523D4F6CFC685B97740D7EBE92A13E708AEF088594888D4BC64E1996ADC1427743B87FB012B1AF1F2C7A40B06811AC1957A7272DD1AAB8C155A100642608A2C0BF254A81E03AE09038F22B44B679C91D3020127CA28ABBCEF1F33D0DF6A762F208673B3D64805C93155D260E6B83B32DD430D995CF344A33684AA0A76CFF5284C15DC8723AA6CB4F6E180B4F9B1436F7EE895882EAC7F93329438F260A54499F5D5EB7E482FBD6164DD24016FA633091D834422AE3BD13FB878667DAF172ED2B789927EA78C3C1E0D8B4B1624DF36163995384225B4B433F6F928AD7F2C4B17065AF5C66443375D7902EA86A30A56D955EAEEBDE30BD2E9E38A04D3C73A5215EB1D3C0C8595339D1422A33796C8F6CA16CA9A7D30F218F65052177949999EA26B530B7085FD99E38697F92F7314E472333BE225184E9A5D2D8642B969B7635D377EEFEB53E48311C4FB694FC42DBE2264C966409C62E5E9D17084C4B644E740299FA41E35885AC1D4CCA2FAAF1B119A69C5FF971FDB9F21EDA3B0F13A7F4E0251A1560BE4FEC0333CE4DB9A4A9248C88962E611AB238E05D9DC636E9B49454E5D39526C2D83114373DE4345C6410D57478AF7064EFE6E5E148F3C1FEE1E890EB722835C2D1EC255E271C5D08B5B25D05AA6DF4C72B4A7715AB587C7B9AD4B35D0B57F23CDE8B0FF9E15E41D7A9DAF04E4BCA6E7AA4D7B34D31DA7CAA3D52DCBB9F4A591DEAA9521FEA6E5506B3AE4F9386682675735734767D0C350B5933FA8D7A661E29B857D435A37E8DB35AB27B5A6F1497F4886DA1ED2BF430161677231504037D60E0FEC1A68C22DBCB035784D30548958E22364ECB27C6B4FFFF99BC1D297DD667FC7EF3C95751BEA1DAAD2F187EF98A08EF9988EF02B2FEBE8AF4E201F7CD67CBC4153BA7C7B7F155AF91517F56AF30321EC28132D3185C6ACC2C33EEC37A62FF99088EACD9AF4FB9EC917523F0318FACA1F5D761D4396C4EAC14B1FD46B9E64471C880897C05A1E94418665BA904E6DB4625BF15947B3422ACA673B3D8F4C909DA7F059EB9730E1170CDEE9A597D2EDA56550B54E335EEB27DCF61B939A6F49887BBC7E1B40EE1C39AEBC0A664EC980C5B47E5EE49B90DB97D6AFD825374CDFACA38B4736E6E0EDB5F66526E7610C898CAAF024856499725846E8A38F69B55AE1467667C11E6A43534CA8F1839ED0A14C19C4ACE84A20BE2E96ED6032993AF001F098BF1C84530077FC66F6215C50A4D8660CE6A5F296AEA6FBB3FF93AA0AEF3F8264ABE697B0D13504DAACBC20DFF1853E6177A5F36737A17847E535901D4B154BA102E3705D275C87B0265EE2B52C13D0411433079C35DB28243747B90F00996C4DBE48D6037C8EE40D4DD3E3EA764294820338C525EFFD2E5E89FBADEFF07B79B66A21C1B0000 , N'6.4.4')
END

IF @CurrentMigration < '202309241310376_AddClassificationColumnTovideoTable'
BEGIN
    ALTER TABLE [dbo].[Videos] ADD [Classification] [int] NOT NULL DEFAULT 0
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'202309241310376_AddClassificationColumnTovideoTable', N'VidzyCodeFirstProject.Migrations.Configuration',  0x1F8B0800000000000400CD59DD6EDB3614BE1FB0771074B50DA96527375B60B7489DA4305627419416BB2B68E9D8E146511A4905F6863DD92EF6487B851DEA97A2645B76D374285058E43987E7E7E3F961FEFDFB9FF19B75C49C271092C67CE28E0643D7011EC421E5AB899BAAE5AB1FDD37AFBFFD667C15466BE7634977A6E99093CB89FBA85472EE7932788488C841440311CB78A906411C79248CBDD3E1F0276F34F20045B828CB71C6F729573482EC033FA7310F20512961F33804268B75DCF133A9CE0D894026248089FB91867F6CA648764D85547722FE1502E53A178C1254C607B6741DC279AC884255CF3F48F09588F9CA4F7081B0874D0248B7244C4261C2794DDED79AE1A9B6C6AB194B51412A551C1D28707456B8C7B3D98F72B25BB90F1D78858E561B6D75E6C489FB0EB840CBED93CEA74C68AA2D0E1E646C274EE7E649050CC48FFE77E24C53A65201130EA912849D3877E982D1E067D83CC4BF019FF09431534FD414F71A0BB884F213106A730FCB42FB59E83A5E93CFB3192B36832737EDED46A1E93778365930A850E0ED64D7FF9702104A78315C674ED6EF81AFD4E3C4C59FAE734DD710962B85D40F9CE23D42262552EB90B157876567B0D0DD101F1EAC8CEDEB078B1E112C5A056BC6D5D96947B40C37F82A1680C804411484774429105C071C32477E85C8B60FB907064442485475D625FE7EA0D1E150CC2EE16CAF87760B993222255DD2A0C83085FD983807F6D63EC937E489AE32DA2E455D076DCF76E5234D8A2332687E2AF6AF451CDDC7AC047ABEFCC98F53116867C5EDBD072256A0FADEA63432EE926DDC4C5E33B2AA6BC1A197AC29EF996F1B622C04C136884933D64DF7CF215A8028CCF329C332EE3A1F094BF173D40A5683FA5DCCC28AF67437ED9D0E22FAB2A23F6BFB3FF7B4B97821651CD0CC3766322B42DF3CEE8A87CE0E1CD4002DF2E11C5D4813741A467DE2FED052BF5B5E891D435E81C3A6BCE16030B22D34AC69276C6C5F14A1BC72588684AC93E94015362405B06491406CDDB5481F947995A4EBD4186FEADE32BDC99E39A08BBD70A5C56ED869C928EFAC41D171A5EDA2B03BB295B2B59E5E3F09652C0D09A5A3EC8AD334A9236F54E1ABDB4E2FEF3BCBFED4DBD2A08EE72449F08A1A0D6BB1E2F879B73A7DE51FDEC345B90C2F901DAD5CA56D75121641B2026B178F2E5311961BB2203AC54DC3A8456680750B92CA831A786C87A9C45749AE7F1BF7A1BBA3B4E5D41EBC46A322ACE3997D60C7B9CD970D0B8411D1D1FD4D6396467C5B07B98B3B6F114CFE7CA52D61EC598ADB1EF25A2EB2806A3BBC57388A7BF3F9E1C8F3C1E1E1D8C2B7CDA1D40A47BB477C9E706C93D068C74C418D8DFEF2AA96CC94552DF697637727A6387BEFE5C1D7CCA11D082CAB432F9495C4BDA0A40B80E5AB8E42D0F648AF6490CBE88A94F64875EE612A15D5ADA74A7D2EC44E65309787346BB3665237EC5543DBC750BB3CB6A3DFAA92364985BDAA5A5A55715C54A8FD6F3BAD929593B80EDAFE841EC672E56FA48268A00906FEEF6CCA28A2BD2698134E972055DE4ABBA7C3D1A9F536F4FF79A7F1A40C599FC79A177F27C1761F270FF5594F25FC8988E09188EF22B2FEDE94F4D9CF212FFE1291B962EF5BC3CBF8AAD70383FEAD9EE181E1180C743F2F1C23A9CE59162A5B33D50C87E5F5C4FD33633C7766BF7C2A794F9C5B8169E1DC193A7F1D07C2E3E658A31C1E366AB6279E630660443E080D4CC2306F4B253073B77A823B41794013C21A3AB7CB569FECA2FD57C9B3772E2101AEEF49C3AC3E07EDAACF9554EB5EEFB3FDC061BE3D46F598D7B78FEB7945C32BBAD081CDC1B86572ED1CE5B74FF25D92BBA7EA2F38E537AC37C6B5BD737DFB31E0CB4CF2ED5E041163FC350AC12AE9AA16A1DB2B8E9DAB89958A66C69771095A4BA392C4CA69735004B333B9108A2E49A0FBE200305FEAA7E7E275ED2A5A4038E3B7A94A52852643B4608DA76C0DFD5DE767CF154D9DC7B749F60EFB1C26A09A5417985BFE36A5C62BE2753BA76F13A1EF54514A752C952EA9AB4D25E926E63D0515EEAB52C10344094361F296FBE4098ED1ED8384F7B022C1A66C29B70BD91F88A6DBC79794AC04896421A3E6C74FC47018AD5FFF076DDBB670941D0000 , N'6.4.4')
END

